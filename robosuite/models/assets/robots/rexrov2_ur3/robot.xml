<mujoco model="rexrov2_ur3">
    <compiler angle="radian" coordinate="local" />
    
    <actuator>
        <!-- UR3 controller -->
        <!-- Physical limits of the actuator. -->
        <!-- Values taken from https://www.universal-robots.com/articles/ur-articles/max-joint-torques/ -->
        <motor ctrllimited="true" ctrlrange="-56.0 56.0" joint="shoulder_pan_joint" name="torq_j1"/>
        <motor ctrllimited="true" ctrlrange="-56.0 56.0" joint="shoulder_lift_joint" name="torq_j2"/>
        <motor ctrllimited="true" ctrlrange="-28.0 28.0" joint="elbow_joint" name="torq_j3"/>
        <motor ctrllimited="true" ctrlrange="-12.0 12.0" joint="wrist_1_joint" name="torq_j4"/>
        <motor ctrllimited="true" ctrlrange="-12.0 12.0" joint="wrist_2_joint" name="torq_j5"/>
        <motor ctrllimited="true" ctrlrange="-12.0 12.0" joint="wrist_3_joint" name="torq_j6"/>

        <!-- rov base controller -->
		<motor ctrllimited="true" ctrlrange="-1.0 1.0" gear="300.0" joint="wrist_x_slide_joint" name="torq_j7"/>
		<motor ctrllimited="true" ctrlrange="-1.0 1.0" gear="300.0" joint="wrist_y_slide_joint" name="torq_j8"/>
		<motor ctrllimited="true" ctrlrange="-1.0 1.0" gear="300.0" joint="wrist_z_slide_joint" name="torq_j9"/>
		<motor ctrllimited="true" ctrlrange="-1.0 1.0" gear="200.0" joint="wrist_z_hinge_joint" name="torq_j10"/>
		<motor ctrllimited="true" ctrlrange="-1.0 1.0" gear="200.0" joint="wrist_y_hinge_joint" name="torq_j11"/>
		<motor ctrllimited="true" ctrlrange="-1.0 1.0" gear="200.0" joint="wrist_x_hinge_joint" name="torq_j12"/>
    </actuator>

    <asset>
        <!-- ROV and the accessories -->
        <mesh name="RexROV2_no_props" file="meshes/RexROV2_no_props.stl" />
        <mesh name="dvl" file="meshes/dvl.stl" />
        <mesh name="rpt" file="meshes/rpt.stl" />
        <mesh name="pressure" file="meshes/pressure.stl" />
        <mesh name="oe14-372" file="meshes/oe14-372.stl" />
        <mesh name="Propeller" file="meshes/Propeller.stl" />
        <!-- UR3 arm -->
        <mesh name="base" file="meshes/base.stl" />
        <mesh name="shoulder" file="meshes/shoulder.stl" />
        <mesh name="upperarm" file="meshes/upperarm.stl" />
        <mesh name="forearm" file="meshes/forearm.stl" />
        <mesh name="wrist1" file="meshes/wrist1.stl" />
        <mesh name="wrist2" file="meshes/wrist2.stl" />
        <mesh name="wrist3" file="meshes/wrist3.stl" />
    </asset>

    <default>
      <!-- <joint damping="0.1"/> -->
      <geom contype='1' conaffinity='1' margin="0.001" solimp="0.99 0.99 0.01" solref="0.01 1" condim="4" rgba="0. 0.7 0.7 1"/> 
      <default class="viz">
        <geom contype="0" conaffinity="0" group="1" />
      </default>
      <default class="coll">
        <geom contype="1" conaffinity="1" margin='0.001' solimp='0.99 0.99 0.01' solref='0.01 1' condim="4" friction="1 .001 .001" type="mesh"/>
      </default>
      <default class="site">
        <geom group="2"/>
      </default>
        <!-- <geom size="0.05 0.05 0.05" rgba="0 0 0 0" type="box" contype='1' conaffinity='1' margin='0.001' solimp='0.99 0.99 0.01' solref='0.01 1' condim="4" name="object0_visual" material="block_mat" mass="2" group="1" friction="1 .001 .001" ></geom>
        <geom size="0.05 0.05 0.05" rgba="0 0 0 0" type="box" contype='1' conaffinity='1' margin='0.001' solimp='0.99 0.99 0.01' solref='0.01 1' condim="4" name="object0_collision" material="block_mat" mass="2" group="0" friction="1 .001 .001" ></geom> -->
      
    </default>    

    <worldbody>
        <!-- add robot here -->
        <body name="base" pos=".0 0 0">
            <!-- rov front view -->
            <camera mode="fixed" name="rov_frontview" pos="1.0445136748848494 0. 0.330466935915392" quat="0.6894423676036768 0.22259422772341225 -0.13908966665891376 -0.6751111731899915" />

            <!-- rov 6 dof joint -->
            <joint name="wrist_x_slide_joint" damping="2000" type="slide" pos="0 0 0" axis="1 0 0" limited="true" range="-0.2 0.2" />
            <joint name="wrist_y_slide_joint" damping="2000" type="slide" pos="0 0 0" axis="0 1 0" limited="true" range="-0.2 0.2" />
            <joint name="wrist_z_slide_joint" damping="5000" type="slide" pos="0 0 0" axis="0 0 1" limited="true" range="-0.2 0.2" />
            <joint name="wrist_z_hinge_joint" damping="5000" type="hinge" pos="0 0 0" axis="0 0 1" limited="true" range="-0.2 0.2" />
            <joint name="wrist_y_hinge_joint" damping="5000" type="hinge" pos="0 0 0" axis="0 1 0" limited="true" range="-0.2 0.2" />
            <joint name="wrist_x_hinge_joint" damping="5000" type="hinge" pos="0 0 0" axis="1 0 0" limited="true" range="-0.2 0.2" />
            <!-- sensor site -->
            <site name="torso" size=".01" rgba="0 0 0 0" class="site"/>
            <body name="rov_body">
                <geom type="mesh" class="viz" mesh="RexROV2_no_props" name="rov_body"/>
                <!-- <geom type="mesh" class="coll" rgba="0.7 0.7 0.7 1" mesh="RexROV2_no_props" /> -->
                <geom size="1.4 0.75 0.02" pos="0 0 -0.75" rgba="0.7 0.7 0.7 1" type="box" />

                <!-- ur3 base -->
                <geom pos="1.28 0 -0.73" quat="0.707107 0 0 0.707107" type="mesh" class="viz" rgba="0.7 0.7 0.7 1" mesh="base" />
                <!-- <geom pos="1.28 0 -0.73" quat="0.707107 0 0 0.707107" type="mesh" class="coll" rgba="0. 0. 0.7 1" mesh="base" name="arm_base"/>   -->
            </body>

            <!-- add arm here -->
            <body name="shoulder_link" pos="1.28 0 -0.5781" quat="0.707107 0 0 -0.707107">
                <inertial pos="0 0 0" mass="2" diaginertia="0.00809316 0.00809316 0.005625" />
                <joint name="shoulder_pan_joint" pos="0 0 0" axis="0 0 1" limited="true" range="-6.28319 6.28319" damping="10" frictionloss="0.01" />
                <geom type="mesh" class="viz" rgba="0.7 0.7 0.7 1" mesh="shoulder" />
                <geom type="mesh" class="coll" rgba="0.7 0.7 0.7 1" mesh="shoulder" name="shoulder"/>
                <!-- <geom pos="0 0 -0.1519" type="mesh" class="viz" rgba="0.7 0.7 0.7 1" mesh="base" /> -->
                <!-- <geom pos="0 0 -0.1519" type="mesh" rgba="0.7 0.7 0.7 1" mesh="base" />         -->
                <body name="upper_arm_link" pos="0 0.1198 0" quat="0.707107 0 0.707107 0">
                    <inertial pos="0 0 0.121825" mass="3.42" diaginertia="0.0217285 0.0217285 0.00961875" />
                    <joint name="shoulder_lift_joint" pos="0 0 0" axis="0 1 0" limited="true" range="-6.28319 6.28319" damping="10" frictionloss="0.01" />
                    <geom type="mesh" class="viz" rgba="0.7 0.7 0.7 1" mesh="upperarm" />
                    <geom type="mesh" class="coll" rgba="0.7 0.7 0.7 1" mesh="upperarm" name="upperarm"/>
                    <body name="forearm_link" pos="0 -0.0925 0.24365">
                        <inertial pos="0 0 0.106625" mass="1.26" diaginertia="0.00654681 0.00654681 0.00354375" />
                        <joint name="elbow_joint" pos="0 0 0" axis="0 1 0" limited="true" range="-3.14159 3.14159" damping="10" frictionloss="0.01"/>
                        <geom type="mesh" class="viz" rgba="0.7 0.7 0.7 1" mesh="forearm" />
                        <geom type="mesh" class="coll" rgba="0.7 0.7 0.7 1" mesh="forearm" />
                        <body name="wrist_1_link" pos="0 0 0.21325" quat="0.707107 0 0.707107 0">
                            <inertial pos="0 0 0" quat="0.5 0.5 -0.5 0.5" mass="0.8" diaginertia="0.00225 0.002085 0.002085" />
                            <joint name="wrist_1_joint" pos="0 0 0" axis="0 1 0" limited="true" range="-6.28319 6.28319" damping="10" frictionloss="0.01"/>
                            <geom type="mesh" class="viz" rgba="0.7 0.7 0.7 1" mesh="wrist1" />
                            <geom type="mesh" class="coll" rgba="0.7 0.7 0.7 1" mesh="wrist1" name="wrist1"/>
                            <body name="wrist_2_link" pos="0 0.08505 0">
                                <inertial pos="0 0 0" quat="0.5 0.5 -0.5 0.5" mass="0.8" diaginertia="0.00225 0.002085 0.002085" />
                                <joint name="wrist_2_joint" pos="0 0 0" axis="0 0 1" limited="true" range="-6.28319 6.28319" damping="10" frictionloss="0.01"/>
                                <geom type="mesh" class="viz" rgba="0.7 0.7 0.7 1" mesh="wrist2" />
                                <geom type="mesh" class="coll" rgba="0.7 0.7 0.7 1" mesh="wrist2" name="wrist2"/>
                                <body name="wrist_3_link" pos="0 0 0.08535">
                                    <inertial pos="0 0.000233333 0" quat="0.5 0.5 -0.5 0.5" mass="0.351" diaginertia="1.00099 1.00092 1.00091" />
                                    <joint name="wrist_3_joint" pos="0 0 0" axis="0 1 0" limited="true" range="-6.28319 6.28319" damping="10" frictionloss="0.01"/>
                                    <geom type="mesh" class="viz" rgba="0.7 0.7 0.7 1" mesh="wrist3" />
                                    <geom type="mesh" class="coll" rgba="0.7 0.7 0.7 1" mesh="wrist3" name="wrist3"/>
                                    <geom size="0.005 0.005 0.005" pos="0 0.0819 0" quat="0.707107 -0.707107 0 0" type="box" class="viz" rgba="0. 1. 0. 1"/>
                                    <geom size="0.005 0.005 0.005" pos="0 0.0819 0" quat="0.707107 -0.707107 0 0" type="box" class="coll" rgba="0. 1. 0. 1" />
                                    <!-- <body name="right_hand" pos="0 0.0819 0" quat="0.707107 -0.707107 0 0"> old pos and quat -->
                                        <!-- <inertial pos="0 0 0.0218182" mass="0.011" diaginertia="0.00205236 0.00205236 0.002" /> -->

                                    <body name="right_hand" pos="0 0.098 0" quat="0.707 -0.707 0 0" >
                                        <!-- This sites were added for visualization. They are all standardized between models-->
                                        <!-- Position mimics the gripper attachment point (right_hand) -->
                                        <!--  Y-axis should be perpendicular to grasping motion, and Z-axis should point out of the robot eef -->
                                        <site name="ee" pos="0 0 0" size="0.01 0.01 0.01" rgba="0 0 1 1" type="sphere" group="1"/>
                                        <site name="ee_x" pos="0 0 0" size="0.005 .1"  quat="0.707105 0.707108 0 0 " rgba="1 0 0 0" type="cylinder" group="1"/>
                                        <site name="ee_z" pos="0 0 0" size="0.005 .1" quat="0.707105 0 0 0.707108" rgba="0 0 1 0" type="cylinder" group="1"/>
                                        <site name="ee_y" pos="0 0 0" size="0.005 .1" quat="0.707105 0 0.707108 0 " rgba="0 1 0 0" type="cylinder" group="1"/>
                                        <!-- This camera points out from the eef. -->
                                        <camera mode="fixed" name="eye_in_hand" pos="0.05 0 0" quat="0 0.707108 0.707108 0" fovy="75"/>
                                        <!-- To add gripper -->

                                    </body>
                                </body>
                            </body>
                        </body>
                    </body>
                </body>
            </body>
        </body>
    </worldbody>

  <contact>
    <!-- <exclude body1="rov_body" body2="arm_base" /> -->
    <exclude body1="rov_body" body2="shoulder_link" />
    <exclude body1="shoulder_link" body2="upper_arm_link" />
    <exclude body1="upper_arm_link" body2="forearm_link" />
    <exclude body1="forearm_link" body2="wrist_1_link" />
    <exclude body1="wrist_1_link" body2="wrist_2_link" />
    <exclude body1="wrist_2_link" body2="wrist_3_link" />
    <exclude body1="wrist_3_link" body2="right_hand" />
  </contact>

    <sensor>
        <!-- IMU -->
        <velocimeter name="velocimeter" site="torso"/>
        <accelerometer name="accelerometer" site="torso"/>
        <gyro name="gyro" site="torso"/>
    </sensor>

</mujoco>